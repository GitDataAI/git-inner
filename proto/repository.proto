syntax = "proto3";

import "share.proto";

package gitfs;

service RepositoryService {
  rpc Init(RepositoryInitRequest) returns (RepositoryInitResponse);
  rpc SetPublic(RpcRepository) returns (RpcRepository);
  rpc SetPrivate(RpcRepository) returns (RpcRepository);
  rpc Delete(RpcRepository) returns (RpcRepository);
  rpc Info(RepositoryInfoRequest) returns (RpcRepository);
}

message RepositoryInitRequest {
  string uid = 3; // should be uuid
  string owner = 6; // should be uuid
  string name = 1;
  string namespace = 2;
  bool is_private = 4;
  string default_branch = 5;
  HashVersion hash_version = 7;
}

enum HashVersion {
  HASH_V1 = 0; // sha1
  HASH_V256 = 1; // sha256
}

message RepositoryInitResponse {
  int64 id = 1;
  string uid = 2; // should be uuid
  string name = 3;
  string namespace = 4;
  bool is_private = 5;
}

message RepositoryInfoRequest {
  string name = 1;
  string namespace = 2;
}